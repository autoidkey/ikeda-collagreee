<div class="panel panel-default">
  <div class="panel-body">
    <h3>Point / ポイントデバッグ</h3>
    <h3><small>あなたの議論ポイントは</small> <%= current_user.sum_point(@theme) %> <small>ポイントです</small></h3>
    <table class="table">
      <thead>
        <tr>
          <th>投稿</th>
          <th>返信</th>
          <th>Like</th>
          <th>アクティブポイント</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><%= current_user.entry_point(@theme) %></td>
          <td><%= current_user.reply_point(@theme) %></td>
          <td><%= current_user.like_point(@theme) %></td>
          <td><%= current_user.active_point(@theme) %></td>
        </tr>
      </tbody>
    </table>
    <table class="table">
      <thead>
        <tr>
          <th>返信された</th>
          <th>Likeされた</th>
          <th></th>
          <th>パッシブポイント</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><%= current_user.replied_point(@theme) %></td>
          <td><%= current_user.liked_point(@theme) %></td>
          <td></td>
          <td><%= current_user.passive_point(@theme) %></td>
        </tr>
      </tbody>
    </table>


    <table class="table">
      <thead>
        <tr>
          <th>action</th>
        </tr>
      </thead>
      <tbody>
        <% current_user.point_history(@theme).each do |ap| %>
        <tr>
          <td>
            $<%= ap.point %>
            <% case ap.action
               when "投稿" %>
            投稿しました (投稿 No.<%= ap.entry_id %>)
            <% when "返信" %>
            <%= ap.entry.parent.user.name %>さんの投稿に返信しました (投稿 No.<%= ap.entry_id %>)
            <% when "Like" %>
            <%= ap.entry.user.name %>さんの投稿にLikeしました (Like No.<%= ap.like_id %>)
            <% when "返信され" %>
            投稿(No.<%= ap.entry_id %>)に返信されました (投稿　No.<%= ap.entry_id %>)
            <% when "Likeされ" %>
            <% if ap.depth == 0 %>
              投稿(No.<%= ap.entry_id %>)が<%= ap.like.user.name %>さんにLikeされました (Like No.<%= ap.like_id %>)
            <% else %>
              投稿(No.<%= ap.entry_id %>)に関連する投稿が<%= ap.like.user.name %>さんにLikeされました (Like No.<%= ap.like_id %>)
            <% end %>
            <% end %>
          </td>
        </tr>
        <% end %>
      </tbody>
    </table>

  </div>
</div>
