<div class="panel panel-default">
  <div class="panel-header">
    <h4 class=""><span class="glyphicon glyphicon-dashboard" aria-hidden="true"></span> <%= t('themes.point_title') %></h4>
  </div>
  <div class="panel-body">
    <span id=""><%= t('themes.your_point_is') %></span>
    <!-- point_listはthemes_controller.rbの中で定義されている -->
    <span id="sum_point">  <%= point_list[:sum] %></span>
    <span id=""><%= t('themes.point_desu') %></span>

    <table class="table point-table">
      <thead>
        <tr>
          <th><%= t('themes.post') %></th>
          <th><%= t('themes.reply') %></th>
          <th><%= t('themes.approval') %></th>
          <th><%= t('themes.point_activity') %></th>
          </tr>
      </thead>
      <tbody>
        <tr>
          <td id="entry_point"><%= point_list[:entry] %></td>
          <td id="reply_point"><%= point_list[:reply] %></td>
          <td id="like_point"> <%= point_list[:like] %></td>
          <td id="active_point"><%= "%.1f" % (point_list[:entry] + point_list[:reply] + point_list[:like]) %></td>
        </tr>
      </tbody>
    </table>

    <table class="table point-table">
      <thead>
        <tr>
          <th><%= t('themes.replied') %></th>
          <th><%= t('themes.approvaled') %></th>
          <th></th>
          <th><%= t('themes.point_activity') %></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td id="replied_point"><%= point_list[:replied] %></td>
          <td id="liked_point"><%= point_list[:liked] %></td>
          <td></td>
          <td id="passive_point"><%= "%.1f" % (point_list[:replied] + point_list[:liked]) %></td>
        </tr>
      </tbody>
    </table>

    <h4><%= t('themes.point_history') %></h4>
    <div style="max-height:300px; overflow-y:scroll;">
      <table height="" class="table">
        <thead>
          <tr>
          </tr>
        </thead>
        <tbody>
          <% @point_history.each do |ap| %>
            <tr>
              <td>
                <span class="bold"><%= ap.point %>pt </span><span class="glyphicon glyphicon-chevron-right small"></span>
                <% case ap.action
                   when "投稿" %>
                <%= t('themes.posted') %> (<%= t('themes.post_no') %><%= ap.entry.id %>)
                <% when "返信" %>
                <%= ap.entry.parent.user.name %>さんの投稿に返信しました (投稿 No.<%= ap.entry.id %>)
                <% when "Like" %>
                <%= ap.entry.user.name %>さんの投稿にいいね！しました (Like No.<%= ap.like.id %>)
                <% when "返信され" %>
                <%= ap.reply.user.name if ap.reply.present? %>さんに返信されました (投稿 No.<%= ap.entry.id %>)
                <% when "Likeされ" %>
                <% if ap.depth == 0 %>
                  投稿(No.<%= ap.entry.id %>)が<%= ap.like.user.name %>さんにいいね！されました (Agree No.<%= ap.like.id %>)
                <% else %>
                  投稿(No.<%= ap.entry.id %>)に関連する投稿が<%= ap.like.user.name %>さんにいいね！されました (Agree No.<%= ap.like.id %>)
                <% end %>
                <% when "Likeを削除され" %>
                投稿(No.<%= ap.entry.id %>)への<%= ap.like.user.name %>さんのいいね！が削除されました (Like No.<%= ap.like.id %>)
          <% end %>
</td>
</tr>
<% end %>
</tbody>
</table>
</div>
</div>
</div>
